var ge=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var K=(n,e,t)=>e in n?ge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,te=(n,e)=>{for(var t in e||(e={}))me.call(e,t)&&K(n,t,e[t]);if(ee)for(var t of ee(e))Re.call(e,t)&&K(n,t,e[t]);return n};var u=(n,e,t)=>(K(n,typeof e!="symbol"?e+"":e,t),t);import{a as _,M as se,r as w,u as Ee,j as m,b as f,F as Te,i as ne,R as Le,c as ye}from"./vendor.7c57073e.js";const Ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}};Ae();const we={keywords:["TT","VM","TH","pre","post"],typeKeywords:["R","N","char"],operators:["=",">","<","!","==","<=",">=","!=","&&","||","+","-","*","/","&"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z*][\w]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}};var g;(function(n){n.IntLit="int",n.FloatLit="float",n.StringLit="string",n.Unknown="unknown"})(g||(g={}));var R;(function(n){n.EOF="eof",n.NAME="name",n.LITERAL="literal"})(R||(R={}));var h;(function(n){n.LPRAREN="(",n.LBRACK="[",n.LBRACE="{",n.RPRAREN=")",n.RBRACK="]",n.RBRACE="}",n.COMMA=",",n.COLON=":",n.DOT=".",n.DOTDOT=".."})(h||(h={}));var P;(function(n){n.PRE="pre",n.POST="post"})(P||(P={}));var I;(function(n){n.TRUE="TRUE",n.FALSE="FALSE"})(I||(I={}));var y;(function(n){n.TT="TT",n.VM="VM",n.TH="TH"})(y||(y={}));var p;(function(n){n.R="R",n.N="N",n.B="B",n.Z="Z",n.CHAR_STAR="char*",n.Z_STAR="Z*",n.R_STAR="R*"})(p||(p={}));var r;(function(n){n.PLUS="+",n.MINUS="-",n.STAR="*",n.SLASH="/",n.PERCENT="%",n.GREATER=">",n.LESSER="<",n.EQUALS="=",n.ASSIGN="=",n.NOT_EQUAL="!=",n.GREATER_EQUAL=">=",n.LESSER_EQUAL="<=",n.NOT="!",n.AND="&&",n.OR="||"})(r||(r={}));var Q;(function(n){n[n.LEFT=0]="LEFT",n[n.RIGHT=1]="RIGHT"})(Q||(Q={}));function j(n){switch(n){case r.STAR:case r.MINUS:case r.SLASH:case r.PERCENT:return 5;case r.PLUS:case r.MINUS:return 6;case r.GREATER:case r.LESSER:case r.EQUALS:case r.GREATER_EQUAL:case r.LESSER_EQUAL:return 8;case r.NOT_EQUAL:return 9;case r.NOT:case r.AND:return 13;case r.OR:return 14;default:return 1e3}}function ie(n){return n==r.NOT?1:0}[...Object.values(p),...Object.values(y),...Object.values(P)];class o{constructor(e){u(this,"type");this.type=e}is(e){return this.type==e}get Type(){return this.type}set Type(e){this.type=e}}class Se extends o{constructor(e,t){super(t);u(this,"value");this.value=e}get Value(){return this.value}}class A extends Se{constructor(e,t){super(e,R.LITERAL);u(this,"kind");this.kind=t}get Kind(){return this.kind}}class F{static Parser(e){}OperandParser(e,t){return e instanceof H?t.visitExpr(e):e instanceof A?t.visitLiterature(e):e instanceof E?e.Name:e instanceof z?t.visitArrayInjectorExpr(e):""}}class H extends F{constructor(e){super();u(this,"token");this.token=e}get Type(){return this.token.Type}set Type(e){this.token.Type=e}}class G extends F{}class D extends H{constructor(e,t){super(e);u(this,"right");this.right=t}valueRight(e){return this.OperandParser(this.right,e)}}class $ extends H{constructor(e,t,s){super(e);u(this,"left");u(this,"right");this.left=t,this.right=s}valueLeft(e){return this.OperandParser(this.left,e)}valueRight(e){return this.OperandParser(this.right,e)}}class k extends G{constructor(e,t){super();u(this,"variable");u(this,"value");this.variable=e,this.value=t||void 0}get HasValue(){return this.value!=null}get DataType(){return this.value instanceof A?this.variable.Type:this.value instanceof E?this.value.Type:(this.value instanceof H,null)}get Identifier(){return this.variable}get VariableName(){return this.variable.Name}Value(e){return this.OperandParser(this.value,e)}}class x extends G{constructor(e){super();u(this,"command");this.command=e}get Command(){return this.command}}class S extends G{constructor(e,t,s){super();u(this,"condition");u(this,"right");u(this,"wrong");this.right=t,this.wrong=s,this.condition=e}get Condition(){return this.condition}get Right(){return this.right}get Wrong(){return this.wrong}set Wrong(e){this.wrong=e}}class Ne{constructor(){u(this,"from");u(this,"to");u(this,"identifier");u(this,"type")}}class q extends G{constructor(){super();u(this,"parameter",[]);u(this,"body")}}class E{constructor(e,t){u(this,"name");u(this,"type");this.name=e,this.type=t}static fromLitoken(e,t){return t?new E(e.Value,t):new E(e.Value,void 0)}toLitoken(){return new A(this.name,g.Unknown)}Equal(e){return e.name==this.name}get Name(){return this.name}get Type(){return this.type}set Name(e){this.name=e}set Type(e){this.type=e}}class z extends F{constructor(e,t){super();u(this,"array");u(this,"position");this.position=t,this.array=e}get PositionValue(){if(this.position instanceof E)return this.position.Name;if(this.position instanceof A)return this.position.Value}get ArrayName(){return this.array.Name}set Position(e){this.position=e}set Array(e){this.array=e}}class be extends F{constructor(e,t,s,i,c){super();u(this,"functionName");u(this,"Parameter",[]);u(this,"Post");u(this,"Return");u(this,"Pre");this.functionName=e,this.Parameter=t,this.Return=c,this.Pre=i,this.Post=s}visit(e){return e.visitFunction(this)}}class $e{constructor(){u(this,"index",0);u(this,"expr",[]);u(this,"tokens",[])}next(){return this.tokens[++this.index]}reset(){this.index=0,this.expr=[],this.tokens=[]}get peek(){return this.tokens[this.index+1]}get current(){return this.tokens[this.index]}parse(e){return this.tokens=e,this.statements()}statements(){if(this.current.Type==R.LITERAL&&this.peek.Type==h.LPRAREN)return this.functionParser()}functionParser(){const t=this.current.Value,s=[];if(this.next(),this.peek.Type!=h.RPRAREN)for(;this.current&&this.current.Type!=h.RPRAREN;){let N=this.next().Value;this.next();let B=this.next().Type;s.push(new E(N,B)),this.next().Type!=h.RPRAREN}else this.next();let i;if(this.peek.Type!=P.PRE){let N=this.next().Value;this.next();let B=this.next().Type;i=new E(N,B)}const c=this.tokens.findIndex(N=>N.Type==P.PRE),a=this.tokens.findIndex(N=>N.Type==P.POST),d=this.tokens.findIndex(N=>N.Type==R.EOF);let v=this.tokens.slice(c+1,a),T=this.parsePreExpr(v),L=this.tokens.slice(a+1,d),U=this.parsePostExpr(L);return new be(t,s,U,T,i)}parsePreExpr(e){return this.genASTTree(e)}genASTTree(e){const t=this.genRPN(e);let s=new Array(0);for(;t.length>0;){const i=t.shift();if(t.length>=3&&i.Type==R.LITERAL&&t[0].Type==h.LBRACK&&t[1].Type==R.LITERAL&&t[2].Type==h.RBRACK){const c=E.fromLitoken(i);s.push(new z(c,t[1])),t.shift(),t.shift(),t.shift();continue}switch(i.Type){case R.LITERAL:s.push(i);break;case r.PLUS:case r.MINUS:case r.STAR:case r.SLASH:case r.PERCENT:case r.GREATER:case r.LESSER:case r.EQUALS:case r.NOT_EQUAL:case r.GREATER_EQUAL:case r.LESSER_EQUAL:case r.AND:case r.OR:let c=s.pop(),a=s.pop();s.push(new $(i,a,c));break;case r.NOT:s.push(new D(i,s.pop()));break}}return s.pop()}genRPN(e){const t=[],s=[];for(e.forEach((i,c,a)=>{switch(a.length>=c+1+3&&i.Type==R.LITERAL&&a[c+1].Type==h.LPRAREN&&a[c+2].Type==R.LITERAL&&a[c+3].Type==h.RPRAREN&&(a[c+1].Type=h.LBRACK,a[c+3].Type=h.RBRACK),i.Type){case R.LITERAL:case h.LBRACK:case h.RBRACK:s.push(i);break;case r.PLUS:case r.MINUS:case r.STAR:case r.SLASH:case r.PERCENT:case r.GREATER:case r.LESSER:case r.EQUALS:case r.NOT_EQUAL:case r.GREATER_EQUAL:case r.LESSER_EQUAL:case r.AND:case r.OR:let d=t[t.length-1];if(d&&ie(i.Type)==Q.LEFT&&j(i.Type)>=j(d.Type)||d&&ie(i.Type)==Q.RIGHT&&j(i.Type)>j(d==null?void 0:d.Type)){let T=t.pop();s.push(T)}t.push(i);break;case h.LPRAREN:t.push(i);break;case h.RPRAREN:let v;for(;v=t.pop(),v&&v.Type!=h.LPRAREN;)s.push(v);break}});t.length>0;)s.push(t.pop());return s}genIfElse(e){if(e instanceof $&&e.Type==r.OR){const t=this.genIfElse(e.left),s=this.genIfElse(e.right);let i=t;for(;i instanceof S&&i.Wrong;)i=i.Wrong;return i instanceof S&&s instanceof F&&(i.Wrong=s),t}else if(e instanceof $&&e.Type==r.EQUALS){const t=E.fromLitoken(e.left);return new k(t,e.right)}else if(e instanceof $&&e.Type==r.AND){if(e.left instanceof $&&e.left.Type==r.EQUALS){const t=E.fromLitoken(e.left.left),s=new k(t,e.left.right);return new S(e.right,s)}if(e.left instanceof $&&e.left.Type==r.AND){let t=e,s=t,i=t;for(;i.left instanceof $&&i.left.Type!=r.EQUALS;)s=i,i=i.left;if(s.left=i.right,i.left instanceof $&&i.left.Type==r.EQUALS){const c=E.fromLitoken(i.left.left),a=new k(c,i.left.right);return new S(t,a)}return e}return e}}parseLoop(e){let t=0;function s(){return e[++t]}function i(){return e[t]}function c(){return e[t+1]}let a=i();a.Type==R.LITERAL&&new E(a.Value);let d=new q;s(),s();const v=()=>{let L=new Ne;a=s(),(a.Type==y.VM||a.Type==y.TT)&&(L.type=a.Type),a=s(),a.Type==R.LITERAL&&(L.identifier=E.fromLitoken(a,p.N)),s(),s(),a=s(),a.Type==R.LITERAL&&(L.from=a),s();let U=[];for(;a=s(),U.push(a),a.Type!=h.RBRACE;);L.to=this.genASTTree(U),s(),d.parameter.push(L)};a=c(),v(),(c().Type==y.VM||c().Type==y.TT)&&v();let T=[];for(;a=s(),!(a==null||a.Type==R.EOF);)T.push(a);return T.pop(),d.body=this.genASTTree(T),d}parsePostExpr(e){const t=e.findIndex(s=>s.Type==y.TH);if(t<0){const s=this.genASTTree(e),i=this.genIfElse(s);return i||s}else if(t>0){const s=this.parseLoop(e);return s||this.genASTTree(e)}}}function V(n){return n>="0"&&n<="9"||n=="."}function re(n){return n==`
`||n=="	"||n==" "}function xe(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function Ce(n){return!!(n%1)}function ae(n){return n=="."}function W(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"}function ce(n){return n=="-"||n=="+"}function ue(n){return n=="*"}class Pe{scan(e){let t="",s=[];for(let i=0;i<e.length;i++){const c=e[i],a=e[i+1]||" ";if(!(re(c)&&re(a))){if(t=t.trimStart()+c,t.length>0&&V(t[0])&&!V(a)&&!ae(a)||t.length>0&&ce(t[0])&&!V(a)&&!ae(a)||i==e.length-1&&V(t[0])||ce(t[0])){let d=Number.parseFloat(t.trim()),v=!1;if(t.endsWith("..")&&(v=!0),xe(d)){s.push(new A(d,g.IntLit)),t="",v&&s.push(new o(h.DOTDOT));continue}if(Ce(d)){s.push(new A(d,g.FloatLit)),t="";continue}}else if(t.length>0&&W(t[0])&&!W(a)&&!V(a)&&!ue(a)||i==e.length-1&&W(t[0])){switch(t.trimEnd()){case"TT":s.push(new o(y.TT)),t="";continue;case"TRUE":s.push(new A(I.TRUE,g.IntLit)),t="";continue;case"FALSE":s.push(new A(I.FALSE,g.IntLit)),t="";continue;case"VM":s.push(new o(y.VM)),t="";continue;case"TH":s.push(new o(y.TH)),t="";continue;case"pre":s.push(new o(P.PRE)),t="";continue;case"post":s.push(new o(P.POST)),t="";continue;case"N":s.push(new o(p.N)),t="";continue;case"R":s.push(new o(p.R)),t="";continue;case"Z":s.push(new o(p.Z)),t="";continue;case"R*":s.push(new o(p.R_STAR)),t="";continue;case"Z*":s.push(new o(p.Z_STAR)),t="";continue;case"B":s.push(new o(p.B)),t="";continue;case"char*":s.push(new o(p.CHAR_STAR)),t="";continue}s.push(new A(t,g.Unknown)),t="";continue}else if(t.length>2&&t.startsWith('"')&&t.endsWith('"'))s.push(new A(t.replaceAll('"',""),g.StringLit)),t="";else if(t.length>0&&V(t[0])||t.length>0&&W(t[0])&&ue(c)||t=="<"&&a=="="||t==">"&&a=="="||t=="!"&&a=="="||t=="&"&&a=="&"||t=="|"&&a=="|")continue;switch(t){case"(":s.push(new o(h.LPRAREN)),t="";continue;case"[":s.push(new o(h.LBRACK)),t="";continue;case"{":s.push(new o(h.LBRACE)),t="";continue;case")":s.push(new o(h.RPRAREN)),t="";continue;case"]":s.push(new o(h.RBRACK)),t="";continue;case"}":s.push(new o(h.RBRACE)),t="";continue;case",":s.push(new o(h.COMMA)),t="";continue;case":":s.push(new o(h.COLON)),t="";continue;case".":s.push(new o(h.DOT)),t="";continue;case"+":s.push(new o(r.PLUS)),t="";continue;case"-":s.push(new o(r.MINUS)),t="";continue;case"*":s.push(new o(r.STAR)),t="";continue;case"%":s.push(new o(r.PERCENT)),t="";continue;case">":s.push(new o(r.GREATER)),t="";continue;case"<":s.push(new o(r.LESSER)),t="";continue;case"=":s.push(new o(r.EQUALS)),t="";continue;case"!=":s.push(new o(r.NOT_EQUAL)),t="";continue;case">=":s.push(new o(r.GREATER_EQUAL)),t="";continue;case"<=":s.push(new o(r.LESSER_EQUAL)),t="";continue;case"/":s.push(new o(r.SLASH)),t="";continue;case"&&":s.push(new o(r.AND)),t="";continue;case"||":s.push(new o(r.OR)),t="";continue}}}return s.push(new o(R.EOF)),s}}class ke{constructor(){u(this,"variable",[])}isVariableExist(e){return this.variable.find(t=>t.Equal(e))}concatVariable(e){this.variable=this.variable.concat(e)}pushVariable(...e){this.variable=this.variable.concat(e)}reset(){this.variable=[]}}class oe extends ke{constructor(){super();u(this,"level",new Ue)}reset(){super.reset(),this.level.reset()}}class Ue{constructor(){u(this,"level",0)}incre(){return this.level+=1,this.level}decre(){return this.level-=1,this.level}getSpaceByLevel(){return" ".repeat(4*this.level)}reset(){this.level=0}}class le extends oe{constructor(){super(...arguments);u(this,"f")}generateDemoFunctionCall(e){let s=e.Parameter.map(i=>{switch(i.Type){case p.B:return"True";case p.CHAR_STAR:return'"demo string"';case p.N:return"2";case p.R:return"4.54";case p.R_STAR:return"[2.43,4.534]";case p.Z:return"-2492";case p.Z_STAR:return"[-4,1,100]"}return"unknowntype"}).join(",");return`console.log(${e.functionName}(${s}));`}genCommand(e){return`${this.level.getSpaceByLevel()}${e};
`}visitFunction(e){this.f=e;let t=`function ${e.functionName}`;return t+="(",e.Parameter.forEach((s,i,c)=>{i==c.length-1?t+=s.Name:t+=s.Name+","}),this.concatVariable(e.Parameter),t+=`){
`,this.level.incre(),e.Return&&(e.Return.Type==p.R_STAR||e.Return.Type==p.Z_STAR?t+=this.genCommand(this.visitAssignExpr(new k(e.Return,new A("[]",g.Unknown)))):t+=this.genCommand(this.visitAssignExpr(new k(e.Return)))),e.Pre&&(t+=this.visitExpr(new S(e.Pre,new x("return")))),e.Post&&(t+=this.visitExpr(e.Post)),e.Return&&(t+=this.genCommand(this.visitCommandExpr(new x(`return ${e.Return.Name}`)))),t+="}",this.reset(),t}reset(){super.reset(),this.f=void 0}visitAssignExpr(e,t){let s=t||this;if(s.isVariableExist(e.Identifier)){if(e.HasValue)return`${e.VariableName} = ${e.Value(this)}`}else{let i="let";return s.pushVariable(e.Identifier),e.HasValue?`${i} ${e.VariableName} = ${e.Value(this)}`:`${i} ${e.VariableName}`}return""}visitLiterature(e){switch(e.Kind){case g.FloatLit:case g.Unknown:case g.IntLit:return e.Value==I.TRUE?"true":e.Value==I.FALSE?"false":e.Value;case g.StringLit:return`"${e.Value}"`}}visitExpr(e){return e instanceof D?this.visitUnary(e):e instanceof $?this.visitBinary(e):e instanceof k?this.visitAssignExpr(e):e instanceof S?this.visitIfElseExpr(e):e instanceof q?this.visitLoop(e):e instanceof x?this.visitCommandExpr(e):e instanceof A?this.visitLiterature(e):e instanceof z?this.visitArrayInjectorExpr(e):""}visitArrayInjectorExpr(e){return`${e.ArrayName}[${e.PositionValue}]`}visitCommandExpr(e){return e.Command}visitUnary(e){switch(e.Type){case r.NOT:return`!${e.valueRight(this)}`}return""}visitBinary(e){switch(e.Type){case r.PLUS:return`(${e.valueLeft(this)} + ${e.valueRight(this)})`;case r.MINUS:return`(${e.valueLeft(this)} - ${e.valueRight(this)})`;case r.STAR:return`(${e.valueLeft(this)} * ${e.valueRight(this)})`;case r.SLASH:return`(${e.valueLeft(this)} / ${e.valueRight(this)})`;case r.PERCENT:return`(${e.valueLeft(this)} % ${e.valueRight(this)})`;case r.GREATER:return`(${e.valueLeft(this)} > ${e.valueRight(this)})`;case r.LESSER:return`(${e.valueLeft(this)} < ${e.valueRight(this)})`;case r.EQUALS:return`(${e.valueLeft(this)} == ${e.valueRight(this)})`;case r.NOT_EQUAL:return`(${e.valueLeft(this)} != ${e.valueRight(this)})`;case r.GREATER_EQUAL:return`(${e.valueLeft(this)} >= ${e.valueRight(this)})`;case r.LESSER_EQUAL:return`(${e.valueLeft(this)} <= ${e.valueRight(this)})`;case r.AND:return`(${e.valueLeft(this)} && ${e.valueRight(this)})`;case r.OR:return`(${e.valueLeft(this)} || ${e.valueRight(this)})`}return""}visitIfElseExpr(e,t=!1){let s="";return s+=(t?"":this.level.getSpaceByLevel())+`if ${this.visitExpr(e.Condition)}{
`,this.level.incre(),s+=this.genCommand(this.visitExpr(e.Right)),e.Wrong instanceof S?(this.level.decre(),s+=this.level.getSpaceByLevel()+"} else ",s+=this.visitIfElseExpr(e.Wrong,!0)):e.Wrong?(this.level.decre(),s+=this.level.getSpaceByLevel()+`} else {
`,this.level.incre(),s+=this.genCommand(this.visitExpr(e.Wrong)),this.level.decre(),s+=this.level.getSpaceByLevel()+`}
`):(this.level.decre(),s+=this.level.getSpaceByLevel()+`}
`),s}visitLoop(e){var s,i,c,a,d,v,T,L;let t="";return e.parameter.length==1&&(e.parameter[0].type==y.TT?(t+=this.level.getSpaceByLevel()+this.visitCommandExpr(new x(`${(i=(s=this.f)==null?void 0:s.Return)==null?void 0:i.Name}=false`))+`
`,t+=this.level.getSpaceByLevel()+`for (let ${e.parameter[0].identifier.Name}=${e.parameter[0].from.Value};${e.parameter[0].identifier.Name}<= ${this.visitExpr(e.parameter[0].to)};${e.parameter[0].identifier.Name}++){
`,this.level.incre(),t+=this.visitIfElseExpr(new S(e.body,new x(`${(a=(c=this.f)==null?void 0:c.Return)==null?void 0:a.Name}=true`)))):e.parameter[0].type==y.VM&&(t+=this.level.getSpaceByLevel()+this.visitCommandExpr(new x(`${(v=(d=this.f)==null?void 0:d.Return)==null?void 0:v.Name}=true`))+`
`,t+=this.level.getSpaceByLevel()+`for (let ${e.parameter[0].identifier.Name}=${e.parameter[0].from.Value};${e.parameter[0].identifier.Name}<= ${this.visitExpr(e.parameter[0].to)};${e.parameter[0].identifier.Name}++){
`,this.level.incre(),t+=this.visitIfElseExpr(new S(e.body,new x(`${(L=(T=this.f)==null?void 0:T.Return)==null?void 0:L.Name}=false`))))),e.parameter.forEach(U=>{this.level.decre(),t+=this.level.getSpaceByLevel()+`}
`}),t}}class Ie extends oe{visitArrayInjectorExpr(e){throw new Error("Method not implemented.")}genCommand(e){return`${this.level.getSpaceByLevel()}${e};
`}generateDemoFunctionCall(e){let s=e.Parameter.map(i=>{switch(i.Type){case p.B:return"True";case p.CHAR_STAR:return'"demo string"';case p.N:return"5";case p.R:return"4.54";case p.R_STAR:return"[2.43,4.534]";case p.Z:return"-2492";case p.Z_STAR:return"[-4,1,100]"}return"unknowntype"}).join(",");return`${e.functionName}(${s})`}visitFunction(e){let t=`def ${e.functionName}`;return t+="(",e.Parameter.forEach((s,i,c)=>{i==c.length-1?t+=s.Name:t+=s.Name+","}),this.concatVariable(e.Parameter),t+=`) : 
`,this.level.incre(),e.Return&&(t+=this.genCommand(this.visitAssignExpr(new k(e.Return)))),e.Pre&&(t+=this.visitExpr(new S(e.Pre,new x("return")))),e.Post&&(t+=this.visitExpr(e.Post)),e.Return&&(t+=this.genCommand(this.visitCommandExpr(new x(`return ${e.Return.Name}`)))),this.reset(),t}visitAssignExpr(e,t){let s=t||this;if(s.isVariableExist(e.Identifier)){if(e.HasValue)return`${e.VariableName} = ${e.Value(this)}`}else{let i="let";return s.pushVariable(e.Identifier),e.HasValue?`${i} ${e.VariableName} = ${e.Value(this)}`:`${i} ${e.VariableName}`}return""}visitLiterature(e){switch(e.Kind){case g.FloatLit:case g.Unknown:case g.IntLit:return e.Value;case g.StringLit:return`"${e.Value}"`}}visitExpr(e){return e instanceof D?this.visitUnary(e):e instanceof $?this.visitBinary(e):e instanceof k?this.visitAssignExpr(e):e instanceof S?this.visitIfElseExpr(e):e instanceof q?this.visitLoop(e):e instanceof x?this.visitCommandExpr(e):e instanceof A?this.visitLiterature(e):""}visitCommandExpr(e){return e.Command}visitUnary(e){switch(e.Type){case r.NOT:return`!${e.valueRight(this)}`}return""}visitBinary(e){switch(e.Type){case r.PLUS:return`(${e.valueRight(this)} + ${e.valueRight(this)})`;case r.MINUS:return`(${e.valueRight(this)} - ${e.valueRight(this)})`;case r.STAR:return`(${e.valueRight(this)} * ${e.valueRight(this)})`;case r.SLASH:return`(${e.valueRight(this)} / ${e.valueRight(this)})`;case r.PERCENT:return`(${e.valueLeft(this)} % ${e.valueRight(this)})`;case r.GREATER:return`(${e.valueLeft(this)} > ${e.valueRight(this)})`;case r.LESSER:return`(${e.valueLeft(this)} < ${e.valueRight(this)})`;case r.EQUALS:return`(${e.valueLeft(this)} == ${e.valueRight(this)})`;case r.NOT_EQUAL:return`(${e.valueLeft(this)} not ${e.valueRight(this)})`;case r.GREATER_EQUAL:return`(${e.valueLeft(this)} >= ${e.valueRight(this)})`;case r.LESSER_EQUAL:return`(${e.valueLeft(this)} <= ${e.valueRight(this)})`;case r.AND:return`(${e.valueLeft(this)} and ${e.valueRight(this)})`;case r.OR:return`(${e.valueLeft(this)} or ${e.valueRight(this)})`}return""}visitIfElseExpr(e){let t="";return t+=this.level.getSpaceByLevel()+`if ${this.visitExpr(e.Condition)}: 
`,this.level.incre(),t+=this.genCommand(this.visitExpr(e.Right)),e.Wrong instanceof S?(this.level.decre(),t+=this.level.getSpaceByLevel()+" else: ",t+=this.visitIfElseExpr(e.Wrong),t+=this.level.getSpaceByLevel()+`
`):e.Wrong?(this.level.decre(),t+=this.level.getSpaceByLevel()+` else :
`,this.level.incre(),t+=this.genCommand(this.visitExpr(e.Wrong)),this.level.decre(),t+=this.level.getSpaceByLevel()+`
`):(this.level.decre(),t+=this.level.getSpaceByLevel()+`
`),t}visitLoop(e){throw new Error("Method not implemented.")}}class Ve{constructor(e,t,s,i){u(this,"visitor",new le);u(this,"parse");u(this,"scanner");u(this,"log");u(this,"isGenFunctionCall",!0);this.log=e||{parser:!1,scanner:!1},this.parse=s||new $e,this.scanner=i||new Pe,t&&this.setVisitor(t)}set EnableGenFunctionCall(e){this.isGenFunctionCall=e}setVisitor(e){switch(e){case"js":case"javascript":this.visitor=new le;break;case"py":case"python":this.visitor=new Ie;break}console.log(this.visitor)}convert(e){console.log(this.visitor);const t=this.scanner.scan(e),s=this.parse.parse(t);if(this.parse.reset(),this.log.scanner&&console.dir(t,{depth:5,colors:!0}),this.log.parser&&console.dir(s,{depth:5,colors:!0}),s){let i=this.visitor.visitFunction(s);return this.isGenFunctionCall&&(i+=`
`+this.visitor.generateDemoFunctionCall(s)),i}else return"Did you input has right sytax ??"}}_.defaults.baseURL="https://cors-anywhere-self-host.herokuapp.com/https://api.jdoodle.com/v1";_.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const he={clientId:"9e4586cf0a0140c864cc63ceeb573393",clientSecret:"b3ec885354973f0d4e30b874d85a1ee009641a6945b8847a6496ace59e9e281d"};function Be(n,e,t,s=3){return _.post("/execute",te({script:n,language:e,versionIndex:s,stdin:t},he))}var Z;(function(n){n.py="python3",n.js="nodejs"})(Z||(Z={}));function Fe(){return _.post("/credit-spent",he)}const pe={minimap:{enabled:!1}};se.setAppElement("#root");const Oe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{zIndex:1e3}},Me={javascript:Z.js,python:Z.py},J=new Ve;function _e(){const[n,e]=w.exports.useState("javascript"),[t,s]=w.exports.useState(0),[i,c]=w.exports.useState(""),[a,d]=w.exports.useState(!0),[v,T]=w.exports.useState(""),[L,U]=w.exports.useState(""),[N,B]=w.exports.useState(""),[O,b]=w.exports.useState(""),M=Ee(),fe=w.exports.useMemo(()=>typeof O=="string"?O.trim()!=="":!1,[O]);function X(){b("")}w.exports.useEffect(()=>{M&&(M.languages.register({id:"specs"}),M.languages.setMonarchTokensProvider("specs",we))},[M]),w.exports.useEffect(()=>{J.EnableGenFunctionCall=a}),w.exports.useEffect(()=>{Fe().then(l=>{s(l.data.used)}).catch(l=>{l.response&&l.response.error?b(l.response.error):l.response?b(l.response):b(l.message)})},[]);function de(){try{const l=J.convert(v);c(l)}catch(l){b(l)}}function ve(l){e(l.target.value),console.log(l.target.value.toLowerCase()),J.setVisitor(l.target.value.toLowerCase())}function Y(){let l=Me[n.toLocaleLowerCase()];if(i.trim()=="")return b("Code in the left is empty");if(t>=200)return b("Out of credit");Be(i,l,L).then(C=>{s(t+1),B(C.data.output.trim())}).catch(C=>{C.response&&C.response.error?b(C.response.error):C.response?b(C.response):b(C.message)})}return m("div",{className:"container m-auto ",children:[m(se,{isOpen:fe,onRequestClose:X,style:Oe,children:[m("h2",{className:"text-red-600 flex justify-start",children:[f(Te,{})," Error"]}),f("p",{children:O}),f("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white",onClick:X,children:"Close"})]}),m("div",{className:"px-4 pt-4 ",children:[f("h1",{className:" text-red-400 text-xl",children:"Notice:"}),m("ul",{className:" text-white 400 text-sm",children:[f("li",{children:"* Due to using jdoodle api, we only have 200 used credit per day ( one per executed)"}),f("li",{children:"* There might be a function cant work as expected, just forget it \u2665"})]})]}),m("div",{className:"px-4 pb-4 inline-flex justify-between w-full mt-4 ",children:[m("div",{className:"w-19/40 h-96",children:[f("h1",{className:"text-xl text-white mb-4 pl-2",children:"Ng\xF4n ng\u1EEF \u0111\u1EB7c t\u1EA3"}),f(ne,{height:"100%",width:"100%",theme:"github",className:"rounded-md",loading:f("h1",{className:"text-white",children:"loading..."}),language:"specs",value:v,onChange:l=>T(l||""),options:pe})]}),m("div",{className:" flex flex-col px-4 gap-4 my-auto",children:[f("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white ",onClick:de,children:"Tranpiler"}),f("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white",onClick:Y,children:"Run"}),f("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white",onClick:Y,children:"Run"}),m("div",{className:"mx-auto",children:[f("label",{htmlFor:"functioncall",className:"text-white pr-1",children:"Call ?"}),f("input",{type:"checkbox",name:"functioncall",value:"",onChange:l=>d(l.target.checked)})]}),m("div",{children:[m("select",{value:n,className:"rounded-md p-2 text-center",onChange:ve,children:[f("option",{value:"Javascript",children:"Javascript"}),f("option",{value:"Python",children:"Python"})]}),m("p",{className:"text-white text-center text-sm font-semibold",children:["Current Credit: ",t]})]})]}),m("div",{className:"w-19/40 h-96",children:[f("h1",{className:"text-xl text-white mb-4 pl-2",children:n}),f(ne,{height:"100%",width:"100%",className:"rounded-md",language:n.toLowerCase(),theme:"github",loading:f("h1",{className:"text-white",children:"loading..."}),value:i,options:pe,onChange:l=>c(l||"")})]})]}),m("div",{className:"inline-flex p-4 justify-between w-full",children:[m("div",{className:"w-2/6 h-40 ",children:[f("h1",{className:"text-xl text-white py-4 pl-2",children:"Input"}),f("textarea",{value:L,onChange:l=>U(l.target.value),className:"text-area "})]}),m("div",{className:"w-4/6 pl-4",children:[f("h1",{className:"text-xl text-white py-4 pl-2",children:"Console"}),f("textarea",{disabled:!0,value:N,className:"text-area",children:"some thing was there"})]})]})]})}Le.render(f(ye.StrictMode,{children:f(_e,{})}),document.getElementById("root"));
