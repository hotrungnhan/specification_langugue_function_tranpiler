var ge=Object.defineProperty;var X=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var K=(i,e,t)=>e in i?ge(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ee=(i,e)=>{for(var t in e||(e={}))Re.call(e,t)&&K(i,t,e[t]);if(X)for(var t of X(e))me.call(e,t)&&K(i,t,e[t]);return i};var c=(i,e,t)=>(K(i,typeof e!="symbol"?e+"":e,t),t);import{a as j,M as te,r as w,u as Ee,j as E,b as g,F as Le,i as se,R as Te,c as Ae}from"./vendor.7c57073e.js";const ye=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}};ye();const Se={keywords:["TT","VM","TH","pre","post"],typeKeywords:["R","N","char"],operators:["=",">","<","!","==","<=",">=","!=","&&","||","+","-","*","/","&"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z*][\w]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}};var m;(function(i){i.IntLit="int",i.FloatLit="float",i.StringLit="string",i.Unknown="unknown"})(m||(m={}));var A;(function(i){i.EOF="eof",i.NAME="name",i.LITERAL="literal"})(A||(A={}));var h;(function(i){i.LPRAREN="(",i.LBRACK="[",i.LBRACE="{",i.RPRAREN=")",i.RBRACK="]",i.RBRACE="}",i.COMMA=",",i.COLON=":",i.DOT=".",i.DOTDOT=".."})(h||(h={}));var I;(function(i){i.PRE="pre",i.POST="post"})(I||(I={}));var k;(function(i){i.TRUE="TRUE",i.FALSE="FALSE"})(k||(k={}));var L;(function(i){i.TT="TT",i.VM="VM",i.TH="TH"})(L||(L={}));var v;(function(i){i.R="R",i.N="N",i.B="B",i.Z="Z",i.CHAR_STAR="char*",i.Z_STAR="Z*",i.R_STAR="R*"})(v||(v={}));var n;(function(i){i.PLUS="+",i.MINUS="-",i.UNARY_PLUS="+u",i.UNARY_MINUS="-u",i.STAR="*",i.SLASH="/",i.PERCENT="%",i.GREATER=">",i.LESSER="<",i.EQUALS="=",i.ASSIGN="=",i.NOT_EQUAL="!=",i.GREATER_EQUAL=">=",i.LESSER_EQUAL="<=",i.NOT="!",i.AND="&&",i.OR="||",i.ARRAY="[]"})(n||(n={}));var H;(function(i){i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT"})(H||(H={}));function G(i){switch(i){case n.UNARY_PLUS:case n.UNARY_MINUS:return 4;case n.STAR:case n.MINUS:case n.SLASH:case n.PERCENT:return 5;case n.PLUS:case n.MINUS:return 6;case n.GREATER:case n.LESSER:case n.EQUALS:case n.GREATER_EQUAL:case n.LESSER_EQUAL:return 8;case n.NOT_EQUAL:return 9;case n.NOT:case n.AND:return 13;case n.OR:return 14;default:return 1e3}}function ie(i){switch(i){case n.NOT:case n.UNARY_MINUS:case n.UNARY_PLUS:return 1;default:return 0}}[...Object.values(v),...Object.values(L),...Object.values(I)];class u{constructor(e){c(this,"type");this.type=e}is(e){return this.type==e}get Type(){return this.type}set Type(e){this.type=e}}class Ne extends u{constructor(e,t){super(t);c(this,"value");this.value=e}get Value(){return this.value}}class S extends Ne{constructor(e,t){super(e,A.LITERAL);c(this,"kind");this.kind=t}get Kind(){return this.kind}}class V{OperandParser(e,t){return e instanceof V?t.visitExpr(e):e instanceof S?t.visitLiterature(e):e instanceof N?e.Name:""}}class D extends V{constructor(e){super();c(this,"token");this.token=e}get Type(){return this.token.Type}set Type(e){this.token.Type=e}}class Y extends V{}class M extends D{constructor(e,t){super(e);c(this,"right");this.right=t}valueRight(e){return this.OperandParser(this.right,e)}}class x extends D{constructor(e,t,s){super(e);c(this,"left");c(this,"right");this.left=t,this.right=s}valueLeft(e){return this.left?this.OperandParser(this.left,e):""}valueRight(e){return this.right?this.OperandParser(this.right,e):""}}class P extends Y{constructor(e,t){super();c(this,"variable");c(this,"value");this.variable=e,this.value=t||void 0}get HasValue(){return this.value!=null}get DataType(){return this.value instanceof S?this.variable.Type:this.value instanceof N?this.value.Type:(this.value instanceof D,null)}get Identifier(){return this.variable}get VariableName(){return this.variable.Name}Value(e){return this.OperandParser(this.value,e)}}class y extends Y{constructor(e){super();c(this,"command");this.command=e}get Command(){return this.command}}class T extends Y{constructor(e,t,s){super();c(this,"condition");c(this,"right");c(this,"wrong");this.right=t,this.wrong=s,this.condition=e}get Condition(){return this.condition}get Right(){return this.right}get Wrong(){return this.wrong}set Wrong(e){this.wrong=e}}class we{constructor(){c(this,"from");c(this,"to");c(this,"identifier");c(this,"type")}}class _ extends Y{constructor(){super();c(this,"parameter",[]);c(this,"body")}}class N{constructor(e,t){c(this,"name");c(this,"type");this.name=e,this.type=t}static fromLitoken(e,t){return t?new N(e.Value,t):new N(e.Value,void 0)}toLitoken(){return new S(this.name,m.Unknown)}Equal(e){return e.name==this.name}get Name(){return this.name}get Type(){return this.type}set Name(e){this.name=e}set Type(e){this.type=e}}class q extends V{constructor(e,t){super();c(this,"array");c(this,"position");this.array=N.fromLitoken(e),this.position=t}PositionValue(e){return this.OperandParser(this.position,e)}get ArrayName(){return this.array.Name}set Position(e){this.position=e}set Array(e){this.array=e}}class $e extends V{constructor(e,t,s,r,l){super();c(this,"functionName");c(this,"Parameter",[]);c(this,"Post");c(this,"Return");c(this,"Pre");this.functionName=e,this.Parameter=t,this.Return=l,this.Pre=r,this.Post=s}visit(e){return e.visitFunction(this)}}class be{constructor(){c(this,"index",0);c(this,"expr",[]);c(this,"tokens",[])}next(){return this.tokens[++this.index]}reset(){this.index=0,this.expr=[],this.tokens=[]}get peek(){return this.tokens[this.index+1]}get current(){return this.tokens[this.index]}parse(e){return this.tokens=e,this.statements()}statements(){if(this.current.Type==A.LITERAL&&this.peek.Type==h.LPRAREN)return this.functionParser()}functionParser(){const t=this.current.Value,s=[];if(this.next(),this.peek.Type!=h.RPRAREN)for(;this.current&&this.current.Type!=h.RPRAREN;){let $=this.next().Value;this.next();let B=this.next().Type;s.push(new N($,B)),this.next().Type!=h.RPRAREN}else this.next();let r;if(this.peek.Type!=I.PRE){let $=this.next().Value;this.next();let B=this.next().Type;r=new N($,B)}const l=this.tokens.findIndex($=>$.Type==I.PRE),a=this.tokens.findIndex($=>$.Type==I.POST),p=this.tokens.findIndex($=>$.Type==A.EOF);let o=this.tokens.slice(l+1,a),d=this.parsePreExpr(o),R=this.tokens.slice(a+1,p),U=this.parsePostExpr(R);return new $e(t,s,U,d,r)}parsePreExpr(e){const t=this.genASTTree(e);return t?new M(new u(n.NOT),t):void 0}genASTTree(e){const t=this.genRPN(e);let s=new Array(0);for(;t.length>0;){const r=t.shift();switch(r.Type){case A.LITERAL:s.push(r);break;case n.PLUS:case n.MINUS:case n.STAR:case n.SLASH:case n.PERCENT:case n.GREATER:case n.LESSER:case n.EQUALS:case n.NOT_EQUAL:case n.GREATER_EQUAL:case n.LESSER_EQUAL:case n.AND:case n.ARRAY:case n.OR:let l=s.pop(),a=s.pop();r.Type==n.ARRAY?s.push(new q(a,l)):s.push(new x(r,a,l));break;case n.UNARY_PLUS:case n.UNARY_MINUS:case n.NOT:s.push(new M(r,s.pop()));break}}return s.pop()}genRPN(e){const t=[],s=[];for(e.forEach((r,l,a)=>{if(a.length>=l+2&&r.Type==A.LITERAL&&a[l+1].Type==h.LPRAREN){a[l+1].Type=h.LBRACK;let p=[];for(let o=l+1;o<a.length;o++)a[o].Type==h.LPRAREN?p.push(a[o]):a[o].Type==h.RPRAREN&&(p.pop()||(a[o].Type=h.RBRACK))}switch(r.Type){case A.LITERAL:s.push(r);break;case n.PLUS:case n.MINUS:case n.STAR:case n.SLASH:case n.PERCENT:case n.GREATER:case n.LESSER:case n.EQUALS:case n.NOT_EQUAL:case n.GREATER_EQUAL:case n.LESSER_EQUAL:case n.AND:case n.OR:case n.NOT:case n.UNARY_MINUS:case n.UNARY_PLUS:let p=t[t.length-1];if(p&&ie(r.Type)==H.LEFT&&G(r.Type)>=G(p.Type)||p&&ie(r.Type)==H.RIGHT&&G(r.Type)>G(p==null?void 0:p.Type)){let R=t.pop();s.push(R)}t.push(r);break;case h.LPRAREN:case h.LBRACK:t.push(r);break;case h.RPRAREN:let o;for(;o=t.pop(),o&&o.Type!=h.LPRAREN;)s.push(o);break;case h.RBRACK:let d;for(;d=t.pop(),d&&d.Type!=h.LBRACK;)s.push(d);s.push(new u(n.ARRAY));break}});t.length>0;)s.push(t.pop());return s}genIfElse(e){if(e instanceof x&&e.Type==n.OR){const t=this.genIfElse(e.left),s=this.genIfElse(e.right);let r=t;for(;r instanceof T&&r.Wrong;)r=r.Wrong;return r instanceof T&&s instanceof V&&(r.Wrong=s),t}else if(e instanceof x&&e.Type==n.EQUALS){const t=N.fromLitoken(e.left);return new P(t,e.right)}else if(e instanceof x&&e.Type==n.AND){if(e.left instanceof x&&e.left.Type==n.EQUALS){const t=N.fromLitoken(e.left.left),s=new P(t,e.left.right);return new T(e.right,s)}if(e.left instanceof x&&e.left.Type==n.AND){let t=e,s=t,r=t;for(;r.left instanceof x&&r.left.Type!=n.EQUALS;)s=r,r=r.left;if(s.left=r.right,r.left instanceof x&&r.left.Type==n.EQUALS){const l=N.fromLitoken(r.left.left),a=new P(l,r.left.right);return new T(t,a)}return e}return e}}parseLoop(e){let t=0;function s(){return e[++t]}function r(){return e[t]}function l(){return e[t+1]}let a=r();a.Type==A.LITERAL&&new N(a.Value);let p=new _;s(),s();const o=()=>{let R=new we;a=s(),(a.Type==L.VM||a.Type==L.TT)&&(R.type=a.Type),a=s(),a.Type==A.LITERAL&&(R.identifier=N.fromLitoken(a,v.N)),s(),s(),a=s(),a.Type==A.LITERAL&&(R.from=a),s();let U=[];for(;a=s(),U.push(a),a.Type!=h.RBRACE;);R.to=this.genASTTree(U),s(),p.parameter.push(R)};a=l(),o(),(l().Type==L.VM||l().Type==L.TT)&&o();let d=[];for(;a=s(),!(a==null||a.Type==A.EOF);)d.push(a);return d.pop(),p.body=this.genASTTree(d),p}parsePostExpr(e){const t=e.findIndex(s=>s.Type==L.TH);if(t<0){const s=this.genASTTree(e),r=this.genIfElse(s);return r||s}else if(t>0){const s=this.parseLoop(e);return s instanceof _&&s.parameter[0].type==L.VM&&(s.body=new M(new u(n.NOT),s.body)),s||this.genASTTree(e)}}}function F(i){return i>="0"&&i<="9"||i=="."}function ne(i){return i==`
`||i=="	"||i==" "}function xe(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}function Pe(i){return!!(i%1)}function re(i){return i=="."}function W(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}function ae(i){return i=="-"||i=="+"}function le(i){return i=="*"}class Ue{scan(e){var r,l;let t="",s=[];for(let a=0;a<e.length;a++){const p=e[a],o=e[a+1]||" ";if(!(ne(p)&&ne(o))){if(t=t.trimStart()+p,t.length>0&&F(t[0])&&!F(o)&&!re(o)||t.length>0&&ae(t[0])&&!F(o)&&!re(o)||a==e.length-1&&F(t[0])||ae(t[0])){let d=Number.parseFloat(t.trim()),R=!1;if(t.endsWith("..")&&(R=!0),xe(d)){s.push(new S(d,m.IntLit)),t="",R&&s.push(new u(h.DOTDOT));continue}if(Pe(d)){s.push(new S(d,m.FloatLit)),t="";continue}}else if(t.length>0&&W(t[0])&&!W(o)&&!F(o)&&!le(o)||a==e.length-1&&W(t[0])){switch(t.trimEnd()){case"TT":s.push(new u(L.TT)),t="";continue;case"TRUE":s.push(new S(k.TRUE,m.IntLit)),t="";continue;case"FALSE":s.push(new S(k.FALSE,m.IntLit)),t="";continue;case"VM":s.push(new u(L.VM)),t="";continue;case"TH":s.push(new u(L.TH)),t="";continue;case"pre":s.push(new u(I.PRE)),t="";continue;case"post":s.push(new u(I.POST)),t="";continue;case"N":s.push(new u(v.N)),t="";continue;case"R":s.push(new u(v.R)),t="";continue;case"Z":s.push(new u(v.Z)),t="";continue;case"R*":s.push(new u(v.R_STAR)),t="";continue;case"Z*":s.push(new u(v.Z_STAR)),t="";continue;case"B":s.push(new u(v.B)),t="";continue;case"char*":s.push(new u(v.CHAR_STAR)),t="";continue}s.push(new S(t,m.Unknown)),t="";continue}else if(t.length>2&&t.startsWith('"')&&t.endsWith('"'))s.push(new S(t.replaceAll('"',""),m.StringLit)),t="";else if(t.length>0&&F(t[0])||t.length>0&&W(t[0])&&le(p)||t=="<"&&o=="="||t==">"&&o=="="||t=="!"&&o=="="||t=="&"&&o=="&"||t=="|"&&o=="|")continue;switch(t){case"(":s.push(new u(h.LPRAREN)),t="";continue;case"[":s.push(new u(h.LBRACK)),t="";continue;case"{":s.push(new u(h.LBRACE)),t="";continue;case")":s.push(new u(h.RPRAREN)),t="";continue;case"]":s.push(new u(h.RBRACK)),t="";continue;case"}":s.push(new u(h.RBRACE)),t="";continue;case",":s.push(new u(h.COMMA)),t="";continue;case":":s.push(new u(h.COLON)),t="";continue;case".":s.push(new u(h.DOT)),t="";continue;case"+":((r=s.at(-1))==null?void 0:r.Type)!=A.LITERAL?s.push(new u(n.UNARY_PLUS)):s.push(new u(n.PLUS)),t="";continue;case"-":((l=s.at(-1))==null?void 0:l.Type)!=A.LITERAL?s.push(new u(n.UNARY_MINUS)):s.push(new u(n.MINUS)),t="";continue;case"*":s.push(new u(n.STAR)),t="";continue;case"%":s.push(new u(n.PERCENT)),t="";continue;case">":s.push(new u(n.GREATER)),t="";continue;case"<":s.push(new u(n.LESSER)),t="";continue;case"=":s.push(new u(n.EQUALS)),t="";continue;case"!=":s.push(new u(n.NOT_EQUAL)),t="";continue;case">=":s.push(new u(n.GREATER_EQUAL)),t="";continue;case"<=":s.push(new u(n.LESSER_EQUAL)),t="";continue;case"/":s.push(new u(n.SLASH)),t="";continue;case"&&":s.push(new u(n.AND)),t="";continue;case"||":s.push(new u(n.OR)),t="";continue}}}return s.push(new u(A.EOF)),s}}class Ce{constructor(){c(this,"variable",[])}isVariableExist(e){return this.variable.find(t=>t.Equal(e))}concatVariable(e){this.variable=this.variable.concat(e)}pushVariable(...e){this.variable=this.variable.concat(e)}reset(){this.variable=[]}}class ce extends Ce{constructor(){super();c(this,"level",new Ie)}reset(){super.reset(),this.level.reset()}}class Ie{constructor(){c(this,"level",0)}incre(){return this.level+=1,this.level}decre(){return this.level-=1,this.level}getSpaceByLevel(){return" ".repeat(4*this.level)}reset(){this.level=0}}class ue extends ce{constructor(){super(...arguments);c(this,"f")}generateDemoFunctionCall(e){function t(l){return l==v.CHAR_STAR||l==v.R_STAR||l==v.Z_STAR}return`
var readline = require('readline');
var rl = readline.createInterface({
	input: process.stdin,
	output: process.stdout,
});
const arr = []
const parramIndex = [${e.Parameter.map((l,a)=>{if(t(l.Type))return a}).filter(l=>l!=null).join(",")}]
rl.on('line', function (line) {
    if (parramIndex.find((value) => value == arr.length) != undefined) {
        arr.push(line.split(" "))
    } else {
        arr.push(line)
    }
    if (arr.length >= ${e.Parameter.length}) {
        console.log(${e.functionName}(...arr))
        rl.close()
    }
})
`}genCommand(e){return`${this.level.getSpaceByLevel()}${e};
`}visitFunction(e){this.f=e;let t=`function ${e.functionName}`;return t+="(",e.Parameter.forEach((s,r,l)=>{r==l.length-1?t+=s.Name:t+=s.Name+","}),this.concatVariable(e.Parameter),t+=`){
`,this.level.incre(),e.Return&&(e.Return.Type==v.R_STAR||e.Return.Type==v.Z_STAR?t+=this.genCommand(this.visitAssignExpr(new P(e.Return,new S("[]",m.Unknown)))):t+=this.genCommand(this.visitAssignExpr(new P(e.Return)))),e.Pre&&(t+=this.visitExpr(new T(e.Pre,new y("return")))),e.Post&&(e.Post instanceof T||e.Post instanceof _?t+=this.visitExpr(e.Post):t+=this.genCommand(this.visitExpr(e.Post))),e.Return&&(t+=this.genCommand(this.visitCommandExpr(new y(`return ${e.Return.Name}`)))),t+="}",this.reset(),t}reset(){super.reset(),this.f=void 0}visitAssignExpr(e,t){let s=t||this;if(s.isVariableExist(e.Identifier)){if(e.HasValue)return`${e.VariableName} = ${e.Value(this)}`}else{let r="let";return s.pushVariable(e.Identifier),e.HasValue?`${r} ${e.VariableName} = ${e.Value(this)}`:`${r} ${e.VariableName}`}return""}visitLiterature(e){switch(e.Kind){case m.FloatLit:case m.Unknown:case m.IntLit:return e.Value==k.TRUE?"true":e.Value==k.FALSE?"false":e.Value;case m.StringLit:return`"${e.Value}"`}}visitExpr(e){return console.log(e),e instanceof M?this.visitUnary(e):e instanceof x?this.visitBinary(e):e instanceof P?this.visitAssignExpr(e):e instanceof T?this.visitIfElseExpr(e):e instanceof _?this.visitLoop(e):e instanceof y?this.visitCommandExpr(e):e instanceof S?this.visitLiterature(e):e instanceof q?this.visitArrayInjectorExpr(e):""}visitArrayInjectorExpr(e){return`${e.ArrayName}[${e.PositionValue(this)}]`}visitCommandExpr(e){return e.Command}visitUnary(e){switch(e.Type){case n.NOT:return`(!${e.valueRight(this)})`;case n.UNARY_PLUS:return`${e.valueRight(this)}`;case n.UNARY_MINUS:return`-${e.valueRight(this)}`}return""}visitBinary(e){switch(e.Type){case n.PLUS:return`(${e.valueLeft(this)} + ${e.valueRight(this)})`;case n.MINUS:return`(${e.valueLeft(this)} - ${e.valueRight(this)})`;case n.STAR:return`(${e.valueLeft(this)} * ${e.valueRight(this)})`;case n.SLASH:return`(${e.valueLeft(this)} / ${e.valueRight(this)})`;case n.PERCENT:return`(${e.valueLeft(this)} % ${e.valueRight(this)})`;case n.GREATER:return`(${e.valueLeft(this)} > ${e.valueRight(this)})`;case n.LESSER:return`(${e.valueLeft(this)} < ${e.valueRight(this)})`;case n.EQUALS:return`(${e.valueLeft(this)} == ${e.valueRight(this)})`;case n.NOT_EQUAL:return`(${e.valueLeft(this)} != ${e.valueRight(this)})`;case n.GREATER_EQUAL:return`(${e.valueLeft(this)} >= ${e.valueRight(this)})`;case n.LESSER_EQUAL:return`(${e.valueLeft(this)} <= ${e.valueRight(this)})`;case n.AND:return`(${e.valueLeft(this)} && ${e.valueRight(this)})`;case n.OR:return`(${e.valueLeft(this)} || ${e.valueRight(this)})`}return""}visitIfElseExpr(e,t=!1){let s="";return s+=(t?"":this.level.getSpaceByLevel())+`if ${this.visitExpr(e.Condition)}{
`,this.level.incre(),s+=this.genCommand(this.visitExpr(e.Right)),e.Wrong instanceof T?(this.level.decre(),s+=this.level.getSpaceByLevel()+"} else ",s+=this.visitIfElseExpr(e.Wrong,!0)):e.Wrong?(this.level.decre(),s+=this.level.getSpaceByLevel()+`} else {
`,this.level.incre(),s+=this.genCommand(this.visitExpr(e.Wrong)),this.level.decre(),s+=this.level.getSpaceByLevel()+`}
`):(this.level.decre(),s+=this.level.getSpaceByLevel()+`}
`),s}visitLoop(e){var s,r,l,a,p,o,d,R;let t="";return e.parameter.length==1&&(e.parameter[0].type==L.TT?(t+=this.level.getSpaceByLevel()+this.visitCommandExpr(new y(`${(r=(s=this.f)==null?void 0:s.Return)==null?void 0:r.Name}=false`))+`
`,t+=this.level.getSpaceByLevel()+`for (let ${e.parameter[0].identifier.Name}=${e.parameter[0].from.Value};${e.parameter[0].identifier.Name}<= ${this.visitExpr(e.parameter[0].to)};${e.parameter[0].identifier.Name}++){
`,this.level.incre(),t+=this.visitIfElseExpr(new T(e.body,new y(`${(a=(l=this.f)==null?void 0:l.Return)==null?void 0:a.Name}=true`)))):e.parameter[0].type==L.VM&&(t+=this.level.getSpaceByLevel()+this.visitCommandExpr(new y(`${(o=(p=this.f)==null?void 0:p.Return)==null?void 0:o.Name}=true`))+`
`,t+=this.level.getSpaceByLevel()+`for (let ${e.parameter[0].identifier.Name}=${e.parameter[0].from.Value};${e.parameter[0].identifier.Name}<= ${this.visitExpr(e.parameter[0].to)};${e.parameter[0].identifier.Name}++){
`,this.level.incre(),t+=this.visitIfElseExpr(new T(e.body,new y(`${(R=(d=this.f)==null?void 0:d.Return)==null?void 0:R.Name}=false`))))),e.parameter.forEach(U=>{this.level.decre(),t+=this.level.getSpaceByLevel()+`}
`}),t}}class ke extends ce{constructor(){super(...arguments);c(this,"f")}genCommand(e){return`${this.level.getSpaceByLevel()}${e}`}generateDemoFunctionCall(e){function t(r){return r==v.CHAR_STAR||r==v.R_STAR||r==v.Z_STAR}this.f=e;let s="";return e.Parameter.forEach((r,l,a)=>{t(r.Type)?s+=this.level.getSpaceByLevel()+`${r.Name} = input().split(" ")
`:s+=this.level.getSpaceByLevel()+`${r.Name} = input() 
`}),s+=`
print(${e.functionName}(`,e.Parameter.forEach((r,l,a)=>{switch(r.Type){case v.B:s+="bool (";break;case v.N:case v.Z:s+="int (";break;case v.R:s+="float (";break;case v.R_STAR:case v.Z_STAR:s+="list (";break}l==a.length-1?s+=r.Name+")":s+=r.Name+"),"}),s+="))",s}visitFunction(e){this.f=e;let t=`def ${e.functionName}`;return t+="(",e.Parameter.forEach((s,r,l)=>{r==l.length-1?t+=s.Name:t+=s.Name+","}),this.concatVariable(e.Parameter),t+=`): 
`,this.level.incre(),e.Return&&(e.Return.Type==v.R_STAR||e.Return.Type==v.Z_STAR?t+=this.visitAssignExpr(new P(e.Return,new S("[]",m.Unknown))):t+=this.visitAssignExpr(new P(e.Return))),e.Pre&&(t+=this.visitExpr(new T(e.Pre,new y("return")))),e.Post&&(e.Post instanceof T||e.Post instanceof _?t+=this.visitExpr(e.Post):(t+=this.genCommand(this.visitExpr(e.Post)),t+=`
`)),e.Return&&(this.level.reset(),this.level.incre(),t+=this.genCommand(this.visitCommandExpr(new y(`return ${e.Return.Name}`)))),this.reset(),t}reset(){super.reset(),this.f=void 0}visitAssignExpr(e,t){let s=t||this;if(s.isVariableExist(e.Identifier)){if(e.HasValue)return`${e.VariableName} = ${e.Value(this)}`}else if(s.pushVariable(e.Identifier),e.HasValue)return`${e.VariableName} = ${e.Value(this)}`;return""}visitLiterature(e){switch(e.Kind){case m.FloatLit:case m.Unknown:case m.IntLit:return e.Value==k.TRUE?"True":e.Value==k.FALSE?"False":e.Value;case m.StringLit:return`"${e.Value}"`}}visitExpr(e){return e instanceof M?this.visitUnary(e):e instanceof x?this.visitBinary(e):e instanceof P?this.visitAssignExpr(e):e instanceof T?this.visitIfElseExpr(e):e instanceof _?this.visitLoop(e):e instanceof y?this.visitCommandExpr(e):e instanceof S?this.visitLiterature(e):e instanceof q?this.visitArrayInjectorExpr(e):""}visitArrayInjectorExpr(e){return`${e.ArrayName}[${e.PositionValue(this)}]`}visitCommandExpr(e){return e.Command}visitUnary(e){switch(e.Type){case n.NOT:return`not (${e.valueRight(this)})`;case n.UNARY_PLUS:return`${e.valueRight(this)}`;case n.UNARY_MINUS:return`-${e.valueRight(this)}`}return""}visitBinary(e){switch(e.Type){case n.PLUS:return`(${e.valueLeft(this)} + ${e.valueRight(this)})`;case n.MINUS:return`(${e.valueLeft(this)} - ${e.valueRight(this)})`;case n.STAR:return`(${e.valueLeft(this)} * ${e.valueRight(this)})`;case n.SLASH:return`(${e.valueLeft(this)} / ${e.valueRight(this)})`;case n.PERCENT:return`(${e.valueLeft(this)} % ${e.valueRight(this)})`;case n.GREATER:return`(${e.valueLeft(this)} > ${e.valueRight(this)})`;case n.LESSER:return`(${e.valueLeft(this)} < ${e.valueRight(this)})`;case n.EQUALS:return`(${e.valueLeft(this)} == ${e.valueRight(this)})`;case n.NOT_EQUAL:return`(${e.valueLeft(this)} != ${e.valueRight(this)})`;case n.GREATER_EQUAL:return`(${e.valueLeft(this)} >= ${e.valueRight(this)})`;case n.LESSER_EQUAL:return`(${e.valueLeft(this)} <= ${e.valueRight(this)})`;case n.AND:return`(${e.valueLeft(this)} and ${e.valueRight(this)})`;case n.OR:return`(${e.valueLeft(this)} or ${e.valueRight(this)})`}return""}visitIfElseExpr(e){let t="";return t+=this.level.getSpaceByLevel()+`if ${this.visitExpr(e.Condition)}: 
`,this.level.incre(),t+=this.genCommand(this.visitExpr(e.Right)),e.Wrong instanceof T?(this.level.decre(),t+=`
`+this.level.getSpaceByLevel()+`else: 
`,this.level.incre(),t+=this.visitIfElseExpr(e.Wrong),this.level.decre()):e.Wrong?(this.level.decre(),t+=this.level.getSpaceByLevel()+`
`,this.level.incre(),t+=this.level.getSpaceByLevel()+`else :
`+this.visitExpr(e.Wrong),this.level.decre(),t+=this.level.getSpaceByLevel()+`
`):t+=this.level.getSpaceByLevel()+`
`,this.level.decre(),t}visitLoop(e){var s,r,l,a,p,o,d,R;let t="";return e.parameter.length==1&&(e.parameter[0].type==L.TT?(console.log(e.body),t+=this.level.getSpaceByLevel()+this.visitCommandExpr(new y(`${(r=(s=this.f)==null?void 0:s.Return)==null?void 0:r.Name}=false`))+`
`,t+=this.level.getSpaceByLevel()+`for ${e.parameter[0].identifier.Name} in range (${e.parameter[0].from.Value}, ${this.visitExpr(e.parameter[0].to)}): 
`,this.level.incre(),t+=this.level.getSpaceByLevel()+`for ${e.parameter[1].identifier.Name} in range (${e.parameter[1].from.Value}, ${this.visitExpr(e.parameter[1].to)}): 
`,t+=this.visitIfElseExpr(new T(e.body,new y(`${(a=(l=this.f)==null?void 0:l.Return)==null?void 0:a.Name}=True`)))):e.parameter[0].type==L.VM&&(t+=this.level.getSpaceByLevel()+this.visitCommandExpr(new y(`${(o=(p=this.f)==null?void 0:p.Return)==null?void 0:o.Name}=True`))+`
`,t+=this.level.getSpaceByLevel()+`for ${e.parameter[0].identifier.Name} in range (${e.parameter[0].from.Value}, ${this.visitExpr(e.parameter[0].to)}): 
`,this.level.incre(),t+=this.visitIfElseExpr(new T(e.body,new y(`${(R=(d=this.f)==null?void 0:d.Return)==null?void 0:R.Name}=False`))))),e.parameter.forEach(U=>{this.level.decre(),t+=this.level.getSpaceByLevel()+`
`}),t}}class Ve{constructor(e,t,s,r){c(this,"visitor",new ue);c(this,"parse");c(this,"scanner");c(this,"log");c(this,"isGenFunctionCall",!0);this.log=e||{parser:!1,scanner:!1},this.parse=s||new be,this.scanner=r||new Ue,t&&this.setVisitor(t)}set EnableGenFunctionCall(e){this.isGenFunctionCall=e}setVisitor(e){switch(e){case"js":case"javascript":this.visitor=new ue;break;case"py":case"python":this.visitor=new ke;break}console.log(this.visitor)}convert(e){console.log(this.visitor);const t=this.scanner.scan(e),s=this.parse.parse(t);if(this.parse.reset(),this.log.scanner&&console.dir(t,{depth:5,colors:!0}),this.log.parser&&console.dir(s,{depth:5,colors:!0}),console.log(s),s){let r=this.visitor.visitFunction(s);return this.isGenFunctionCall&&(r+=`
`+this.visitor.generateDemoFunctionCall(s)),r}else return"Did you input has right sytax ??"}}j.defaults.baseURL="https://cors-anywhere-self-host.herokuapp.com/https://api.jdoodle.com/v1";j.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const oe={clientId:"9e4586cf0a0140c864cc63ceeb573393",clientSecret:"b3ec885354973f0d4e30b874d85a1ee009641a6945b8847a6496ace59e9e281d"};function Be(i,e,t,s=3){return j.post("/execute",ee({script:i,language:e,versionIndex:s,stdin:t},oe))}var Z;(function(i){i.py="python3",i.js="nodejs"})(Z||(Z={}));function _e(){return j.post("/credit-spent",oe)}const he={minimap:{enabled:!1}};te.setAppElement("#root");const Fe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{zIndex:1e3}},Me={javascript:Z.js,python:Z.py},z=new Ve;function Oe(){const[i,e]=w.exports.useState("javascript"),[t,s]=w.exports.useState(0),[r,l]=w.exports.useState(""),[a,p]=w.exports.useState(!0),[o,d]=w.exports.useState(""),[R,U]=w.exports.useState(""),[$,B]=w.exports.useState(""),[O,b]=w.exports.useState(""),Q=Ee(),pe=w.exports.useMemo(()=>typeof O=="string"?O.trim()!=="":!1,[O]);function J(){b("")}w.exports.useEffect(()=>{Q&&(Q.languages.register({id:"specs"}),Q.languages.setMonarchTokensProvider("specs",Se))},[Q]),w.exports.useEffect(()=>{z.EnableGenFunctionCall=a}),w.exports.useEffect(()=>{_e().then(f=>{s(f.data.used)}).catch(f=>{f.response&&f.response.error?b(f.response.error):f.response?b(f.response):b(f.message)})},[]);function fe(){try{const f=z.convert(o);l(f)}catch(f){b(f)}}function ve(f){e(f.target.value),z.setVisitor(f.target.value.toLowerCase())}function de(){let f=Me[i.toLocaleLowerCase()];if(r.trim()=="")return b("Code in the left is empty");if(t>=200)return b("Out of credit");B("running ......"),Be(r,f,R).then(C=>{s(t+1),B(C.data.output.trim())}).catch(C=>{C.response&&C.response.error?b(C.response.error):C.response?b(C.response):b(C.message)})}return E("div",{className:"container m-auto ",children:[E(te,{isOpen:pe,onRequestClose:J,style:Fe,children:[E("h2",{className:"text-red-600 flex justify-start",children:[g(Le,{})," Error"]}),g("p",{children:O}),g("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white",onClick:J,children:"Close"})]}),E("div",{className:"px-4 pt-4 ",children:[g("h1",{className:" text-red-400 text-xl",children:"Notice:"}),E("ul",{className:" text-white 400 text-sm",children:[g("li",{children:"* Due to using jdoodle api, we only have 200 used credit per day ( one per executed)"}),g("li",{children:"* There might be a function cant work as expected, just forget it \u2665"})]})]}),E("div",{className:"px-4 pb-4 inline-flex justify-between w-full mt-4 ",children:[E("div",{className:"w-19/40 h-96",children:[g("h1",{className:"text-xl text-white mb-4 pl-2",children:"Ng\xF4n ng\u1EEF \u0111\u1EB7c t\u1EA3"}),g(se,{height:"100%",width:"100%",theme:"github",className:"rounded-md",loading:g("h1",{className:"text-white",children:"loading..."}),language:"specs",value:o,onChange:f=>d(f||""),options:he})]}),E("div",{className:" flex flex-col px-4 gap-4 my-auto",children:[g("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white ",onClick:fe,children:"Tranpiler"}),g("button",{className:"btn border-blue-100 border-2 bg-green-400 my-auto text-white",onClick:de,children:"Run"}),E("div",{className:"mx-auto",children:[g("label",{htmlFor:"functioncall",className:"text-white pr-1",children:"Call ?"}),g("input",{type:"checkbox",name:"functioncall",value:"",onChange:f=>p(f.target.checked)})]}),E("div",{children:[E("select",{value:i,className:"rounded-md p-2 text-center",onChange:ve,children:[g("option",{value:"Javascript",children:"Javascript"}),g("option",{value:"Python",children:"Python"})]}),E("p",{className:"text-white text-center text-sm font-semibold",children:["Current Credit: ",t]})]})]}),E("div",{className:"w-19/40 h-96",children:[g("h1",{className:"text-xl text-white mb-4 pl-2",children:i}),g(se,{height:"100%",width:"100%",className:"rounded-md",language:i.toLowerCase(),theme:"github",loading:g("h1",{className:"text-white",children:"loading..."}),value:r,options:he,onChange:f=>l(f||"")})]})]}),E("div",{className:"inline-flex p-4 justify-between w-full",children:[E("div",{className:"w-2/6 h-40 ",children:[g("h1",{className:"text-xl text-white py-4 pl-2",children:"Input"}),g("textarea",{value:R,onChange:f=>U(f.target.value),className:"text-area "})]}),E("div",{className:"w-4/6 pl-4",children:[g("h1",{className:"text-xl text-white py-4 pl-2",children:"Console"}),g("textarea",{disabled:!0,value:$,className:"text-area",children:"some thing was there"})]})]})]})}Te.render(g(Ae.StrictMode,{children:g(Oe,{})}),document.getElementById("root"));
